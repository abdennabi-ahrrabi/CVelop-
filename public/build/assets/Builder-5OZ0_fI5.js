import{r as p,j as e,R as ve,H as Ce,b as ue}from"./app-BWfocxdu.js";import{A as Fe}from"./AuthenticatedLayout-BlGNKwXn.js";import{d as oe}from"./api-DWuNZLhI.js";import"./transition-CkejyAL4.js";const ze={essential:[{type:"header",label:"Header",icon:"ðŸ‘¤",description:"Name and contact information"},{type:"summary",label:"Summary",icon:"ðŸ“",description:"Professional summary or objective"},{type:"experience",label:"Work Experience",icon:"ðŸ’¼",description:"Employment history"},{type:"education",label:"Education",icon:"ðŸŽ“",description:"Academic background"},{type:"skills",label:"Skills",icon:"âš¡",description:"Technical and soft skills"}],additional:[{type:"certifications",label:"Certifications",icon:"ðŸ“œ",description:"Professional certifications"},{type:"projects",label:"Projects",icon:"ðŸš€",description:"Portfolio projects"},{type:"languages",label:"Languages",icon:"ðŸŒ",description:"Language proficiencies"},{type:"awards",label:"Awards",icon:"ðŸ†",description:"Achievements and recognitions"},{type:"publications",label:"Publications",icon:"ðŸ“š",description:"Articles and papers"},{type:"volunteering",label:"Volunteering",icon:"ðŸ¤",description:"Community service"},{type:"hobbies",label:"Hobbies & Interests",icon:"ðŸŽ¨",description:"Personal interests"},{type:"references",label:"References",icon:"ðŸ‘¥",description:"Professional references"}],custom:[{type:"custom",label:"Custom Section",icon:"âœ¨",description:"Create your own section"},{type:"spacer",label:"Spacer",icon:"âž–",description:"Add vertical spacing"},{type:"divider",label:"Divider Line",icon:"â€”",description:"Horizontal divider line"}]};function ye({onDragStart:r,onLayoutPresetSelect:j}){const[g,d]=p.useState("essential"),w=[{id:"classic",name:"Classic",icon:"ðŸ“„",description:"Single column layout"},{id:"modern",name:"Modern",icon:"ðŸ“±",description:"Two columns with sidebar"},{id:"creative",name:"Creative",icon:"ðŸŽ¨",description:"Asymmetric layout"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold mb-3",children:"Layout Presets"}),e.jsx("div",{className:"grid grid-cols-1 gap-2",children:w.map(t=>e.jsx("button",{onClick:()=>j(t.id),className:"p-3 border border-gray-200 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors text-left",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:t.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:t.name}),e.jsx("div",{className:"text-xs text-gray-500",children:t.description})]})]})},t.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold mb-3",children:"Components"}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx("button",{onClick:()=>d("essential"),className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${g==="essential"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Essential"}),e.jsx("button",{onClick:()=>d("additional"),className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${g==="additional"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Additional"}),e.jsx("button",{onClick:()=>d("custom"),className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${g==="custom"?"bg-blue-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:"Custom"})]}),e.jsx("div",{className:"space-y-2",children:ze[g].map(t=>e.jsx("div",{draggable:!0,onDragStart:l=>r(l,t),className:"p-2.5 border border-gray-200 rounded-lg cursor-move hover:border-blue-400 hover:bg-blue-50 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("span",{className:"text-xl",children:t.icon}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:t.label}),e.jsx("div",{className:"text-xs text-gray-500",children:t.description})]})]})},t.type))})]}),e.jsx("div",{className:"p-2.5 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsx("p",{className:"text-xs text-blue-800",children:"ðŸ’¡ Drag to preview area"})})]})}function Be({sections:r,onDrop:j,onDragOver:g,onSectionClick:d,selectedSection:w,onRemoveSection:t,onReorder:l,layoutMode:y}){const x=(c,f,i=null)=>{c.dataTransfer.effectAllowed="move",c.dataTransfer.setData("reorderIndex",f),i&&c.dataTransfer.setData("fromColumn",i)},n=(c,f,i=null)=>{c.preventDefault();const k=c.dataTransfer.getData("reorderIndex"),S=c.dataTransfer.getData("fromColumn");k!==""?l(parseInt(k),f,S,i):j(c,i)},b=c=>y==="single"?c==="main"?r:[]:r.filter(f=>(f.column||"main")===c),z=(c,f,i=null)=>e.jsx("div",{draggable:!0,onDragStart:k=>x(k,f,i),onDrop:k=>n(k,f,i),onDragOver:g,onClick:()=>d(c),className:`p-4 bg-white border-2 rounded-lg cursor-pointer transition-all ${w?.id===c.id?"border-blue-500 shadow-md":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:c.label}),e.jsxs("div",{className:"text-xs text-gray-500",children:[c.config?.width||"Full"," width",c.column&&` â€¢ ${c.column} column`]})]})]}),e.jsx("button",{onClick:k=>{k.stopPropagation(),t(c.id)},className:"p-2 text-red-500 hover:bg-red-50 rounded-lg transition-colors",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},c.id),C=(c,f)=>e.jsx("div",{onDrop:i=>n(i,f.length,c),onDragOver:g,className:"min-h-[400px] border-2 border-dashed border-gray-300 rounded-lg p-4 bg-gray-50",children:f.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 py-12",children:[e.jsx("svg",{className:"w-12 h-12 mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("p",{className:"text-sm",children:"Drop sections here"})]}):e.jsx("div",{className:"space-y-3",children:f.map((i,k)=>z(i,k,c))})});if(y==="single"){const c=b("main");return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Canvas"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[r.length," sections"]})]}),e.jsx("div",{onDrop:f=>n(f,c.length,"main"),onDragOver:g,className:"min-h-[500px] border-2 border-dashed border-gray-300 rounded-lg p-4 bg-gray-50",children:r.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 py-20",children:[e.jsx("svg",{className:"w-16 h-16 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-lg font-medium",children:"Empty Canvas"}),e.jsx("p",{className:"text-sm",children:"Drag components from the library to start building"})]}):e.jsx("div",{className:"space-y-3",children:c.map((f,i)=>z(f,i,"main"))})})]})}const D=b("left"),T=b("right");return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Canvas - Two Column Layout"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[r.length," sections"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-2 px-2",children:"LEFT SIDEBAR"}),C("left",D)]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"text-xs font-semibold text-gray-600 mb-2 px-2",children:"MAIN CONTENT"}),C("right",T)]})]}),r.length===0&&e.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center text-gray-400 pointer-events-none",children:[e.jsx("svg",{className:"w-16 h-16 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),e.jsx("p",{className:"text-lg font-medium",children:"Empty Canvas"}),e.jsx("p",{className:"text-sm",children:"Drag components to either column to start building"})]})]})}const ae={common:[{name:"Black",value:"#000000"},{name:"White",value:"#FFFFFF"},{name:"Gray",value:"#6B7280"},{name:"Light Gray",value:"#F3F4F6"}],professional:[{name:"Navy Blue",value:"#1e3a8a"},{name:"Royal Blue",value:"#3b82f6"},{name:"Sky Blue",value:"#0ea5e9"},{name:"Teal",value:"#14b8a6"},{name:"Emerald",value:"#10b981"},{name:"Purple",value:"#8b5cf6"},{name:"Slate",value:"#475569"},{name:"Stone",value:"#78716c"}],warm:[{name:"Red",value:"#ef4444"},{name:"Orange",value:"#f97316"},{name:"Amber",value:"#f59e0b"},{name:"Yellow",value:"#eab308"}],cool:[{name:"Cyan",value:"#06b6d4"},{name:"Indigo",value:"#6366f1"},{name:"Violet",value:"#a855f7"},{name:"Fuchsia",value:"#d946ef"}]};function _({value:r,onChange:j,label:g,showPresets:d=!0}){const[w,t]=p.useState(!1),[l,y]=p.useState([]),x=n=>{j(n),y(b=>{const z=b.filter(C=>C!==n);return[n,...z].slice(0,8)})};return e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:g}),e.jsxs("button",{type:"button",onClick:()=>t(!w),className:"w-full flex items-center gap-2 px-2.5 py-1.5 border border-gray-300 rounded-lg hover:border-gray-400 transition-colors bg-white",children:[e.jsx("div",{className:"w-6 h-6 rounded border border-gray-300 shadow-sm",style:{backgroundColor:r}}),e.jsx("span",{className:"flex-1 text-left text-sm font-mono",children:r}),e.jsx("svg",{className:`w-4 h-4 text-gray-400 transition-transform ${w?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),w&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 z-10",onClick:()=>t(!1)}),e.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white border border-gray-200 rounded-lg shadow-xl z-20 p-4 max-h-96 overflow-y-auto",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Custom Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:r,onChange:n=>x(n.target.value),className:"w-12 h-8 rounded border border-gray-300 cursor-pointer"}),e.jsx("input",{type:"text",value:r,onChange:n=>x(n.target.value),className:"flex-1 px-2 py-1 text-sm border border-gray-300 rounded font-mono",placeholder:"#000000"})]})]}),l.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Recent Colors"}),e.jsx("div",{className:"grid grid-cols-8 gap-1.5",children:l.map((n,b)=>e.jsx("button",{type:"button",onClick:()=>x(n),className:"w-7 h-7 rounded border-2 border-gray-300 hover:border-blue-500 transition-colors shadow-sm",style:{backgroundColor:n},title:n},b))})]}),d&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Common"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:ae.common.map(n=>e.jsxs("button",{type:"button",onClick:()=>x(n.value),className:"flex flex-col items-center gap-1 p-2 rounded hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded border-2 border-gray-300 shadow-sm",style:{backgroundColor:n.value}}),e.jsx("span",{className:"text-xs text-gray-600",children:n.name})]},n.value))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Professional"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:ae.professional.map(n=>e.jsxs("button",{type:"button",onClick:()=>x(n.value),className:"flex flex-col items-center gap-1 p-2 rounded hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded border-2 border-gray-300 shadow-sm",style:{backgroundColor:n.value}}),e.jsx("span",{className:"text-xs text-gray-600 text-center leading-tight",children:n.name})]},n.value))})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Warm"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:ae.warm.map(n=>e.jsxs("button",{type:"button",onClick:()=>x(n.value),className:"flex flex-col items-center gap-1 p-2 rounded hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded border-2 border-gray-300 shadow-sm",style:{backgroundColor:n.value}}),e.jsx("span",{className:"text-xs text-gray-600",children:n.name})]},n.value))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-2",children:"Cool"}),e.jsx("div",{className:"grid grid-cols-4 gap-2",children:ae.cool.map(n=>e.jsxs("button",{type:"button",onClick:()=>x(n.value),className:"flex flex-col items-center gap-1 p-2 rounded hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded border-2 border-gray-300 shadow-sm",style:{backgroundColor:n.value}}),e.jsx("span",{className:"text-xs text-gray-600",children:n.name})]},n.value))})]})]})]})]})]})}const De=["DejaVu Sans","Arial","Helvetica","Times New Roman","Georgia","Roboto","Open Sans","Lato","Montserrat","Poppins","Inter","Playfair Display"],Le=[{name:"Professional",description:"Clean and business-ready",fontFamily:"Arial",fontSize:10,lineHeight:1.5},{name:"Modern",description:"Contemporary and stylish",fontFamily:"Inter",fontSize:10,lineHeight:1.6},{name:"Classic",description:"Traditional and elegant",fontFamily:"Georgia",fontSize:11,lineHeight:1.7},{name:"Bold",description:"Stand out with impact",fontFamily:"Montserrat",fontSize:11,lineHeight:1.5},{name:"Minimal",description:"Simple and clean",fontFamily:"Helvetica",fontSize:9,lineHeight:1.4},{name:"Creative",description:"Artistic and unique",fontFamily:"Poppins",fontSize:10,lineHeight:1.6}];function je({section:r,onUpdate:j,layoutMode:g}){if(!r)return e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-base font-semibold mb-4",children:"Properties"}),e.jsxs("div",{className:"text-center text-gray-400 py-8",children:[e.jsx("svg",{className:"w-10 h-10 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})}),e.jsx("p",{className:"text-xs",children:"Select a section to edit"})]})]});const d=(t,l)=>{j({...r,config:{...r.config,[t]:l}})},w=t=>{j({...r,column:t})};return e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-base font-semibold mb-4",children:"Properties"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Section Title"}),e.jsx("input",{type:"text",value:r.config?.customTitle||r.label,onChange:t=>d("customTitle",t.target.value),className:"w-full px-2.5 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Typography Presets"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Le.map(t=>e.jsxs("button",{type:"button",onClick:()=>{j({...r,config:{...r.config,fontFamily:t.fontFamily,fontSize:t.fontSize,lineHeight:t.lineHeight}})},className:"p-2 border border-gray-200 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-colors text-left",style:{fontFamily:t.fontFamily},children:[e.jsx("div",{className:"text-xs font-semibold text-gray-900",children:t.name}),e.jsx("div",{className:"text-xs text-gray-500 truncate",children:t.description})]},t.name))})]}),g==="two-column"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Column Position"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx("button",{onClick:()=>w("left"),className:`px-3 py-2 text-sm font-medium rounded-lg border-2 transition-colors ${(r.column||"right")==="left"?"border-blue-600 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"}`,children:"Left Sidebar"}),e.jsx("button",{onClick:()=>w("right"),className:`px-3 py-2 text-sm font-medium rounded-lg border-2 transition-colors ${(r.column||"right")==="right"?"border-blue-600 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"}`,children:"Main Content"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Section Width"}),e.jsxs("select",{value:r.config?.width||"full",onChange:t=>d("width",t.target.value),className:"w-full px-2.5 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"full",children:"Full Width"}),e.jsx("option",{value:"half",children:"Half Width"}),e.jsx("option",{value:"third",children:"One Third"}),e.jsx("option",{value:"two-thirds",children:"Two Thirds"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Font Family"}),e.jsx("select",{value:r.config?.fontFamily||"DejaVu Sans",onChange:t=>d("fontFamily",t.target.value),className:"w-full px-2.5 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",style:{fontFamily:r.config?.fontFamily||"DejaVu Sans"},children:De.map(t=>e.jsx("option",{value:t,style:{fontFamily:t},children:t},t))})]}),e.jsx(_,{label:"Background Color",value:r.config?.backgroundColor||"#FFFFFF",onChange:t=>d("backgroundColor",t)}),e.jsx(_,{label:"Text Color",value:r.config?.textColor||"#000000",onChange:t=>d("textColor",t)}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"checkbox",checked:r.config?.useGradient||!1,onChange:t=>d("useGradient",t.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Use Gradient Background"})]}),r.config?.useGradient&&e.jsxs("div",{className:"space-y-2 pl-6",children:[e.jsx(_,{label:"Start Color",value:r.config?.gradientStart||"#3b82f6",onChange:t=>d("gradientStart",t),showPresets:!1}),e.jsx(_,{label:"End Color",value:r.config?.gradientEnd||"#8b5cf6",onChange:t=>d("gradientEnd",t),showPresets:!1}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Direction"}),e.jsxs("select",{value:r.config?.gradientDirection||"135deg",onChange:t=>d("gradientDirection",t.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"90deg",children:"Left to Right"}),e.jsx("option",{value:"180deg",children:"Top to Bottom"}),e.jsx("option",{value:"135deg",children:"Diagonal â†˜"}),e.jsx("option",{value:"45deg",children:"Diagonal â†—"})]})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:["Opacity: ",r.config?.opacity||100,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:r.config?.opacity||100,onChange:t=>d("opacity",parseInt(t.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2 mb-2",children:[e.jsx("input",{type:"checkbox",checked:r.config?.useBoxShadow||!1,onChange:t=>d("useBoxShadow",t.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Add Shadow"})]}),r.config?.useBoxShadow&&e.jsxs("div",{className:"space-y-2 pl-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"X Offset"}),e.jsx("input",{type:"number",value:r.config?.shadowX||0,onChange:t=>d("shadowX",parseInt(t.target.value)),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Y Offset"}),e.jsx("input",{type:"number",value:r.config?.shadowY||4,onChange:t=>d("shadowY",parseInt(t.target.value)),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Blur"}),e.jsx("input",{type:"number",value:r.config?.shadowBlur||6,onChange:t=>d("shadowBlur",parseInt(t.target.value)),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Spread"}),e.jsx("input",{type:"number",value:r.config?.shadowSpread||0,onChange:t=>d("shadowSpread",parseInt(t.target.value)),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded"})]})]}),e.jsx(_,{label:"Shadow Color",value:r.config?.shadowColor||"#000000",onChange:t=>d("shadowColor",t),showPresets:!1}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs text-gray-600 mb-1",children:["Shadow Opacity: ",r.config?.shadowOpacity||10,"%"]}),e.jsx("input",{type:"range",min:"0",max:"100",value:r.config?.shadowOpacity||10,onChange:t=>d("shadowOpacity",parseInt(t.target.value)),className:"w-full"})]})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:["Font Size: ",r.config?.fontSize||10,"pt"]}),e.jsx("input",{type:"range",min:"8",max:"24",value:r.config?.fontSize||10,onChange:t=>d("fontSize",parseInt(t.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:["Line Height: ",r.config?.lineHeight||1.5]}),e.jsx("input",{type:"range",min:"1",max:"2.5",step:"0.1",value:r.config?.lineHeight||1.5,onChange:t=>d("lineHeight",parseFloat(t.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:["Padding: ",r.config?.padding||20,"px"]}),e.jsx("input",{type:"range",min:"0",max:"50",value:r.config?.padding||20,onChange:t=>d("padding",parseInt(t.target.value)),className:"w-full"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:["Margin Bottom: ",r.config?.marginBottom||20,"px"]}),e.jsx("input",{type:"range",min:"0",max:"50",value:r.config?.marginBottom||20,onChange:t=>d("marginBottom",parseInt(t.target.value)),className:"w-full"})]}),e.jsx("div",{children:e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:r.config?.showBorder||!1,onChange:t=>d("showBorder",t.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Show Border"})]})}),r.config?.showBorder&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Border Style"}),e.jsxs("select",{value:r.config?.borderStyle||"solid",onChange:t=>d("borderStyle",t.target.value),className:"w-full px-2.5 py-1.5 text-sm border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"solid",children:"Solid"}),e.jsx("option",{value:"dashed",children:"Dashed"}),e.jsx("option",{value:"dotted",children:"Dotted"}),e.jsx("option",{value:"double",children:"Double"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:["Border Width: ",r.config?.borderWidth||1,"px"]}),e.jsx("input",{type:"range",min:"1",max:"5",value:r.config?.borderWidth||1,onChange:t=>d("borderWidth",parseInt(t.target.value)),className:"w-full"})]}),e.jsx(_,{label:"Border Color",value:r.config?.borderColor||"#CCCCCC",onChange:t=>d("borderColor",t),showPresets:!1}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:["Border Radius: ",r.config?.borderRadius||0,"px"]}),e.jsx("input",{type:"range",min:"0",max:"20",value:r.config?.borderRadius||0,onChange:t=>d("borderRadius",parseInt(t.target.value)),className:"w-full"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1.5",children:"Text Alignment"}),e.jsx("div",{className:"grid grid-cols-3 gap-2",children:["left","center","right"].map(t=>e.jsx("button",{onClick:()=>d("textAlign",t),className:`px-3 py-2 text-sm font-medium rounded-lg border-2 transition-colors capitalize ${(r.config?.textAlign||"left")===t?"border-blue-600 bg-blue-50 text-blue-700":"border-gray-300 hover:border-gray-400"}`,children:t},t))})]})]})]})}function Me({sections:r,templateName:j,colors:g,layoutMode:d}){const w=x=>{const n=x.config||{},b={backgroundColor:n.backgroundColor||"#FFFFFF",color:n.textColor||"#000000",fontFamily:n.fontFamily||"DejaVu Sans",fontSize:`${n.fontSize||10}pt`,lineHeight:n.lineHeight||1.5,padding:`${n.padding||20}px`,marginBottom:`${n.marginBottom||20}px`,border:n.showBorder?`${n.borderWidth||1}px ${n.borderStyle||"solid"} ${n.borderColor||"#CCCCCC"}`:"none",borderRadius:n.showBorder?`${n.borderRadius||0}px`:"0",textAlign:n.textAlign||"left"},z=n.customTitle||x.label,C=()=>{switch(x.type){case"header":return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"16pt",fontWeight:"bold",marginBottom:"5px"},children:"John Doe"}),e.jsx("div",{style:{fontSize:"9pt"},children:"john.doe@email.com | (555) 123-4567 | New York, NY"})]});case"summary":return e.jsx("p",{children:"Experienced professional with a proven track record of success in delivering high-quality results."});case"experience":return e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:"Senior Developer"}),e.jsx("div",{style:{fontSize:"9pt",color:"#666"},children:"Tech Company | 2020 - Present"}),e.jsx("div",{style:{fontSize:"9pt",marginTop:"5px"},children:"Led development of multiple projects."})]});case"education":return e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:"Bachelor of Science in Computer Science"}),e.jsx("div",{style:{fontSize:"9pt",color:"#666"},children:"University Name | 2016 - 2020"})]});case"skills":return e.jsx("div",{style:{fontSize:"9pt"},children:"JavaScript, React, Node.js, Python, SQL, Git"});case"certifications":return e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:"AWS Certified Solutions Architect"}),e.jsx("div",{style:{fontSize:"9pt",color:"#666"},children:"Amazon Web Services | 2022"})]});case"projects":return e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:"E-commerce Platform"}),e.jsx("div",{style:{fontSize:"9pt",marginTop:"5px"},children:"Built a full-stack e-commerce solution with React and Node.js"})]});case"languages":return e.jsx("div",{style:{fontSize:"9pt"},children:"English (Native), Spanish (Intermediate), French (Basic)"});case"awards":return e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:"Employee of the Year"}),e.jsx("div",{style:{fontSize:"9pt",color:"#666"},children:"Tech Company | 2022"})]});case"publications":return e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:"Modern Web Development Best Practices"}),e.jsx("div",{style:{fontSize:"9pt",color:"#666"},children:"Tech Journal | 2023"})]});case"volunteering":return e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:"Code Mentor"}),e.jsx("div",{style:{fontSize:"9pt",color:"#666"},children:"Local Coding Bootcamp | 2021 - Present"})]});case"hobbies":return e.jsx("div",{style:{fontSize:"9pt"},children:"Photography, Hiking, Playing Guitar, Reading Tech Blogs"});case"references":return e.jsx("div",{style:{fontSize:"9pt"},children:e.jsx("div",{style:{fontWeight:"bold"},children:"Available upon request"})});case"custom":return e.jsx("div",{style:{fontSize:"9pt",fontStyle:"italic",color:"#999"},children:"Your custom content here..."});case"spacer":return e.jsx("div",{style:{height:"20px"}});case"divider":return e.jsx("hr",{style:{border:"none",borderTop:"1px solid #ccc",margin:"10px 0"}});default:return e.jsx("div",{style:{fontSize:"9pt",color:"#999"},children:"Section content"})}};return e.jsxs("div",{style:b,children:[x.type!=="spacer"&&x.type!=="divider"&&e.jsx("h3",{style:{fontWeight:"bold",marginBottom:"10px",fontSize:"12pt"},children:z}),e.jsx("div",{style:{fontSize:"9pt"},children:C()})]},x.id)},t=x=>d==="single"?x==="main"?r:[]:r.filter(n=>(n.column||"right")===x),l=()=>e.jsx("div",{style:{padding:"40px",minHeight:"100%"},children:r.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),e.jsx("p",{children:"Preview will appear here"})]})}):r.map(x=>w(x))}),y=()=>{const x=t("left"),n=t("right");return e.jsxs("div",{style:{display:"flex",minHeight:"100%"},children:[e.jsx("div",{style:{width:"33.333%",padding:"40px 20px",backgroundColor:"#f9fafb",borderRight:"1px solid #e5e7eb"},children:x.length>0?x.map(b=>w(b)):e.jsxs("div",{className:"text-center text-gray-400 text-xs py-8",children:[e.jsx("p",{children:"Left sidebar"}),e.jsx("p",{children:"Drop sections here"})]})}),e.jsx("div",{style:{flex:1,padding:"40px"},children:n.length>0?n.map(b=>w(b)):e.jsxs("div",{className:"text-center text-gray-400 text-xs py-8",children:[e.jsx("p",{children:"Main content area"}),e.jsx("p",{children:"Drop sections here"})]})})]})};return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Live Preview"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs px-2 py-1 bg-green-100 text-green-800 rounded-full",children:"Live"}),e.jsx("span",{className:"text-xs text-gray-500",children:d==="single"?"1 Column":"2 Columns"})]})]}),e.jsx("div",{className:"border border-gray-300 rounded-lg overflow-hidden bg-white",children:e.jsx("div",{className:"aspect-[8.5/11] overflow-auto",style:{maxHeight:"600px"},children:d==="single"?l():y()})}),e.jsxs("div",{className:"mt-3 text-xs text-gray-500 text-center",children:[r.length," section",r.length!==1?"s":""," â€¢ Sample data shown"]})]})}function Te({sections:r,onSectionClick:j,onSectionUpdate:g,onSectionReorder:d,onSectionDrop:w,onRemoveSection:t,onDuplicateSection:l,selectedSection:y,layoutMode:x}){const[n,b]=p.useState(null),[z,C]=p.useState(null),[D,T]=p.useState(null),[c,f]=p.useState(.85),i=p.useRef(null),k=p.useRef(null),S=(a,h,v)=>{a.stopPropagation(),b({section:h,index:v}),a.dataTransfer.effectAllowed="move"},E=(a,h,v)=>{a.preventDefault(),a.stopPropagation(),n?(d(n.index,h,n.section.column,v),b(null)):w(a,v)},G=a=>{a.preventDefault()},A=(a,h)=>{a.preventDefault(),a.stopPropagation(),C(h),T({x:a.clientX,y:a.clientY,originalPadding:h.config?.padding||20})},Q=a=>{if(!z||!D)return;const h=a.clientY-D.y,v=Math.max(0,Math.min(100,D.originalPadding+Math.floor(h/2)));g({...z,config:{...z.config,padding:v}})},L=()=>{C(null),T(null)},Y=(a,h)=>{const v=a.config?.fontSize||10,u=Math.max(8,Math.min(24,v+h));g({...a,config:{...a.config,fontSize:u}})},$=(a,h)=>{const v=a.config?.marginBottom||20,u=Math.max(0,Math.min(50,v+h));g({...a,config:{...a.config,marginBottom:u}})},J=()=>{if(k.current){const a=k.current,h=a.clientWidth-64,v=a.clientHeight-64,u=210*3.7795275591,P=297*3.7795275591,te=h/u,I=v/P,O=Math.min(te,I,1.5);f(Math.max(.5,O))}};ve.useEffect(()=>{if(z)return document.addEventListener("mousemove",Q),document.addEventListener("mouseup",L),()=>{document.removeEventListener("mousemove",Q),document.removeEventListener("mouseup",L)}},[z,D]),ve.useEffect(()=>{const a=h=>{h.ctrlKey&&(h.key==="="||h.key==="+")&&(h.preventDefault(),f(Math.min(1.5,c+.1))),h.ctrlKey&&h.key==="-"&&(h.preventDefault(),f(Math.max(.5,c-.1))),h.ctrlKey&&h.key==="0"&&(h.preventDefault(),J())};return window.addEventListener("keydown",a),()=>window.removeEventListener("keydown",a)},[c]);const R=(a,h)=>y?.id!==a.id?null:e.jsx("div",{className:"absolute -top-10 left-0 right-0 flex justify-center z-20",children:e.jsxs("div",{className:"flex items-center gap-1 bg-blue-600 text-white rounded-lg px-2 py-1 shadow-lg text-xs",children:[e.jsx("button",{onClick:v=>{v.stopPropagation(),Y(a,-1)},className:"px-2 py-1 hover:bg-blue-700 rounded",title:"Decrease font size",children:"A-"}),e.jsx("button",{onClick:v=>{v.stopPropagation(),Y(a,1)},className:"px-2 py-1 hover:bg-blue-700 rounded",title:"Increase font size",children:"A+"}),e.jsx("div",{className:"w-px h-4 bg-blue-400 mx-1"}),e.jsx("button",{onClick:v=>{v.stopPropagation(),$(a,-5)},className:"px-2 py-1 hover:bg-blue-700 rounded",title:"Decrease spacing",children:"â†•-"}),e.jsx("button",{onClick:v=>{v.stopPropagation(),$(a,5)},className:"px-2 py-1 hover:bg-blue-700 rounded",title:"Increase spacing",children:"â†•+"}),e.jsx("div",{className:"w-px h-4 bg-blue-400 mx-1"}),e.jsxs("span",{className:"px-2 text-blue-100",children:[a.config?.fontSize||10,"pt"]})]})}),K=(a,h,v=null)=>{const u=a.config||{},P=y?.id===a.id,te=n?.section.id===a.id;let I=u.backgroundColor||"#FFFFFF";if(u.useGradient){const B=u.gradientStart||"#3b82f6",X=u.gradientEnd||"#8b5cf6";I=`linear-gradient(${u.gradientDirection||"135deg"}, ${B}, ${X})`}let O="none";if(u.useBoxShadow){const B=u.shadowX||0,X=u.shadowY||4,se=u.shadowBlur||6,le=u.shadowSpread||0,ie=u.shadowColor||"#000000",de=(u.shadowOpacity||10)/100;O=`${B}px ${X}px ${se}px ${le}px ${ie}${Math.round(de*255).toString(16).padStart(2,"0")}`}const q={background:I,color:u.textColor||"#000000",fontFamily:u.fontFamily||"DejaVu Sans",fontSize:`${u.fontSize||10}pt`,lineHeight:u.lineHeight||1.5,padding:`${u.padding||20}px`,marginBottom:`${u.marginBottom||20}px`,border:u.showBorder?`${u.borderWidth||1}px ${u.borderStyle||"solid"} ${u.borderColor||"#CCCCCC"}`:"none",borderRadius:u.showBorder?`${u.borderRadius||0}px`:"0",textAlign:u.textAlign||"left",opacity:(u.opacity||100)/100,boxShadow:O,cursor:"move",position:"relative"};te&&(q.opacity=.5);const re=()=>{switch(a.type){case"header":return e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontSize:"16pt",fontWeight:"bold",marginBottom:"5px"},children:"John Doe"}),e.jsx("div",{style:{fontSize:"9pt"},children:"john.doe@email.com | (555) 123-4567 | New York, NY"})]});case"summary":return e.jsx("p",{children:"Experienced professional with a proven track record of success in delivering high-quality results."});case"experience":return e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:"Senior Developer"}),e.jsx("div",{style:{fontSize:"9pt",color:"#666"},children:"Tech Company | 2020 - Present"}),e.jsx("div",{style:{fontSize:"9pt",marginTop:"5px"},children:"Led development of multiple projects."})]});case"education":return e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:"Bachelor of Science in Computer Science"}),e.jsx("div",{style:{fontSize:"9pt",color:"#666"},children:"University Name | 2016 - 2020"})]});case"skills":return e.jsx("div",{style:{fontSize:"9pt"},children:"JavaScript, React, Node.js, Python, SQL, Git"});case"certifications":return e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:"AWS Certified Solutions Architect"}),e.jsx("div",{style:{fontSize:"9pt",color:"#666"},children:"Amazon Web Services | 2022"})]});case"projects":return e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:"E-commerce Platform"}),e.jsx("div",{style:{fontSize:"9pt",marginTop:"5px"},children:"Built a full-stack e-commerce solution"})]});case"languages":return e.jsx("div",{style:{fontSize:"9pt"},children:"English (Native), Spanish (Intermediate)"});case"awards":return e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:"Employee of the Year"}),e.jsx("div",{style:{fontSize:"9pt",color:"#666"},children:"Tech Company | 2022"})]});case"publications":return e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:"Modern Web Development"}),e.jsx("div",{style:{fontSize:"9pt",color:"#666"},children:"Tech Journal | 2023"})]});case"volunteering":return e.jsxs("div",{children:[e.jsx("div",{style:{fontWeight:"bold"},children:"Code Mentor"}),e.jsx("div",{style:{fontSize:"9pt",color:"#666"},children:"Coding Bootcamp | 2021 - Present"})]});case"hobbies":return e.jsx("div",{style:{fontSize:"9pt"},children:"Photography, Hiking, Playing Guitar"});case"references":return e.jsx("div",{style:{fontSize:"9pt",fontWeight:"bold"},children:"Available upon request"});case"custom":return e.jsx("div",{style:{fontSize:"9pt",fontStyle:"italic",color:"#999"},children:"Your custom content..."});case"spacer":return e.jsx("div",{style:{height:"20px",background:"repeating-linear-gradient(90deg, transparent, transparent 10px, #e5e7eb 10px, #e5e7eb 11px)"}});case"divider":return e.jsx("hr",{style:{border:"none",borderTop:"2px solid #ccc",margin:"0"}});default:return e.jsx("div",{style:{fontSize:"9pt",color:"#999"},children:"Section content"})}};return e.jsxs("div",{draggable:!0,onDragStart:B=>S(B,a,h),onDrop:B=>E(B,h,v),onDragOver:G,onClick:B=>{B.stopPropagation(),j(a)},className:`relative transition-all ${P?"ring-2 ring-blue-500 ring-offset-2":"hover:ring-1 hover:ring-blue-300"}`,style:q,children:[R(a),a.type!=="spacer"&&a.type!=="divider"&&e.jsx("h3",{style:{fontWeight:"bold",marginBottom:"10px",fontSize:"12pt"},children:u.customTitle||a.label}),e.jsx("div",{style:{fontSize:"9pt"},children:re()}),P&&e.jsxs("div",{className:"absolute top-2 right-2 flex items-center gap-1 z-20",children:[e.jsx("button",{onClick:B=>{B.stopPropagation(),l(a)},className:"p-1.5 bg-blue-600 hover:bg-blue-700 text-white rounded transition-colors shadow-lg",title:"Duplicate Section (Ctrl+D)",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),e.jsx("button",{onClick:B=>{B.stopPropagation(),a.type==="header"?confirm("Are you sure you want to delete the header section?")&&t(a.id):t(a.id)},className:"p-1.5 bg-red-600 hover:bg-red-700 text-white rounded transition-colors shadow-lg",title:"Delete Section (Del)",children:e.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),P&&e.jsx("div",{onMouseDown:B=>A(B,a),className:"absolute bottom-0 left-1/2 transform -translate-x-1/2 translate-y-1/2 w-16 h-2 bg-blue-500 rounded-full cursor-ns-resize hover:bg-blue-600 shadow-lg flex items-center justify-center",title:"Drag to resize padding",children:e.jsx("div",{className:"w-8 h-0.5 bg-white rounded"})}),P&&e.jsxs("div",{className:"absolute top-2 left-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded pointer-events-none",children:[u.padding||20,"px padding"]})]},a.id)},W=a=>x==="single"?a==="main"?r:[]:r.filter(h=>(h.column||"right")===a),U=()=>{const a=W("main");return e.jsx("div",{onDrop:h=>E(h,a.length,"main"),onDragOver:G,style:{padding:"40px",minHeight:"100%",backgroundColor:"#fff"},children:r.length===0?e.jsx("div",{className:"flex items-center justify-center h-full text-gray-400 py-20",children:e.jsxs("div",{className:"text-center",children:[e.jsx("svg",{className:"w-16 h-16 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("p",{className:"text-lg font-medium",children:"Drop sections here"}),e.jsx("p",{className:"text-sm",children:"Drag components from the library or canvas"})]})}):a.map((h,v)=>K(h,v,"main"))})},ee=()=>{const a=W("left"),h=W("right");return e.jsxs("div",{style:{display:"flex",minHeight:"100%"},children:[e.jsx("div",{onDrop:v=>E(v,a.length,"left"),onDragOver:G,style:{width:"33.333%",padding:"40px 20px",backgroundColor:"#f9fafb",borderRight:"1px solid #e5e7eb"},children:a.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-12",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("p",{className:"text-sm font-medium",children:"Left Sidebar"}),e.jsx("p",{className:"text-xs",children:"Drop sections here"})]}):a.map((v,u)=>K(v,u,"left"))}),e.jsx("div",{onDrop:v=>E(v,h.length,"right"),onDragOver:G,style:{flex:1,padding:"40px",backgroundColor:"#fff"},children:h.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-12",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),e.jsx("p",{className:"text-sm font-medium",children:"Main Content"}),e.jsx("p",{className:"text-xs",children:"Drop sections here"})]}):h.map((v,u)=>K(v,u,"right"))})]})};return e.jsxs("div",{className:"relative w-full h-full flex flex-col",children:[e.jsxs("div",{className:"absolute top-4 right-4 z-30 flex items-center gap-2 bg-white rounded-lg shadow-lg border border-gray-200 px-3 py-2",children:[e.jsx("button",{onClick:()=>f(Math.max(.5,c-.1)),className:"w-7 h-7 flex items-center justify-center rounded hover:bg-gray-100 transition-colors",title:"Zoom Out",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})})}),e.jsxs("span",{className:"text-xs font-medium text-gray-600 min-w-[3rem] text-center",children:[Math.round(c*100),"%"]}),e.jsx("button",{onClick:()=>f(Math.min(1.5,c+.1)),className:"w-7 h-7 flex items-center justify-center rounded hover:bg-gray-100 transition-colors",title:"Zoom In",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})}),e.jsx("div",{className:"w-px h-5 bg-gray-300 mx-1"}),e.jsx("button",{onClick:J,className:"px-2 py-1 text-xs font-medium rounded hover:bg-gray-100 transition-colors",title:"Auto Fit (Ctrl+0)",children:"Fit"})]}),e.jsxs("div",{className:"absolute top-4 left-4 z-30 bg-white rounded-lg shadow-lg border border-gray-200 px-3 py-2 flex items-center gap-3",children:[e.jsx("span",{className:"text-xs font-medium text-green-600",children:"âœ¨ Interactive"}),e.jsx("div",{className:"w-px h-4 bg-gray-300"}),e.jsxs("span",{className:"text-xs text-gray-600",children:[r.length," section",r.length!==1?"s":""]}),e.jsx("div",{className:"w-px h-4 bg-gray-300"}),e.jsx("span",{className:"text-xs text-gray-600",children:x==="single"?"1 Column":"2 Columns"})]}),e.jsx("div",{ref:k,className:"flex-1 overflow-auto",children:e.jsx("div",{className:"min-h-full flex items-start justify-center p-8",children:e.jsx("div",{ref:i,className:"bg-white shadow-2xl transition-transform duration-200",style:{width:"210mm",minHeight:"297mm",transform:`scale(${c})`,transformOrigin:"top center"},children:x==="single"?U():ee()})})}),e.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2 z-30 bg-blue-600 text-white rounded-lg shadow-lg px-4 py-2 max-w-3xl",children:e.jsx("p",{className:"text-xs text-center",children:"ðŸ’¡ Drag to reorder â€¢ Click to select â€¢ Use toolbar for edits â€¢ Resize handle for padding â€¢ Ctrl+/- to zoom â€¢ Ctrl+0 to fit"})})]})}function Pe({sections:r,selectedSection:j,onSectionClick:g,onSectionReorder:d,onSectionToggleVisibility:w,onSectionToggleLock:t,onSectionRename:l}){const[y,x]=p.useState(null),[n,b]=p.useState(""),z=(i,k)=>{k.stopPropagation(),x(i.id),b(i.config?.customTitle||i.label)},C=i=>{n.trim()&&l(i,n),x(null)},D=(i,k)=>{i.dataTransfer.effectAllowed="move",i.dataTransfer.setData("layerIndex",k)},T=(i,k)=>{i.preventDefault();const S=parseInt(i.dataTransfer.getData("layerIndex"));S!==k&&d(S,k)},c=i=>{i.preventDefault()},f=i=>({header:"ðŸ‘¤",summary:"ðŸ“",experience:"ðŸ’¼",education:"ðŸŽ“",skills:"âš¡",certifications:"ðŸ“œ",projects:"ðŸš€",languages:"ðŸŒ",awards:"ðŸ†",publications:"ðŸ“š",volunteering:"ðŸ¤",hobbies:"ðŸŽ¨",references:"ðŸ‘¥",custom:"âœ¨",spacer:"âž–",divider:"â€”"})[i]||"ðŸ“„";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-base font-semibold",children:"Layers"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[r.length," sections"]})]}),e.jsx("div",{className:"space-y-1",children:r.length===0?e.jsxs("div",{className:"text-center text-gray-400 py-8",children:[e.jsx("svg",{className:"w-12 h-12 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1h-4a1 1 0 01-1-1V5z"})}),e.jsx("p",{className:"text-sm",children:"No layers yet"})]}):r.map((i,k)=>e.jsxs("div",{draggable:!0,onDragStart:S=>D(S,k),onDrop:S=>T(S,k),onDragOver:c,onClick:()=>g(i),className:`group flex items-center gap-2 px-3 py-2 rounded-lg cursor-pointer transition-all ${j?.id===i.id?"bg-blue-50 border-2 border-blue-500":"hover:bg-gray-50 border-2 border-transparent"} ${i.hidden?"opacity-40":""} ${i.locked?"cursor-not-allowed":""}`,children:[e.jsx("div",{className:"text-gray-400 cursor-move",children:e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})})}),e.jsx("span",{className:"text-lg",children:f(i.type)}),y===i.id?e.jsx("input",{type:"text",value:n,onChange:S=>b(S.target.value),onBlur:()=>C(i),onKeyDown:S=>{S.key==="Enter"&&C(i),S.key==="Escape"&&x(null)},onClick:S=>S.stopPropagation(),autoFocus:!0,className:"flex-1 px-2 py-1 text-sm border border-blue-500 rounded focus:outline-none"}):e.jsx("div",{className:"flex-1 text-sm font-medium truncate",onDoubleClick:S=>z(i,S),children:i.config?.customTitle||i.label}),i.column&&i.column!=="main"&&e.jsx("span",{className:"text-xs px-2 py-0.5 bg-purple-100 text-purple-700 rounded",children:i.column==="left"?"L":"R"}),e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:S=>{S.stopPropagation(),w(i)},className:"p-1 hover:bg-gray-200 rounded",title:i.hidden?"Show":"Hide",children:i.hidden?e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):e.jsxs("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),e.jsx("button",{onClick:S=>{S.stopPropagation(),t(i)},className:"p-1 hover:bg-gray-200 rounded",title:i.locked?"Unlock":"Lock",children:i.locked?e.jsx("svg",{className:"w-4 h-4 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}):e.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 11V7a4 4 0 118 0m-4 8v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2z"})})})]})]},i.id))}),e.jsx("div",{className:"p-2.5 bg-blue-50 border border-blue-200 rounded-lg text-xs text-blue-800",children:"ðŸ’¡ Double-click to rename â€¢ Drag to reorder"})]})}const We={headers:[{id:"header-minimal",name:"Minimal Header",preview:"ðŸ‘¤ Minimal",config:{backgroundColor:"#FFFFFF",textColor:"#000000",fontFamily:"DejaVu Sans",fontSize:14,padding:30,marginBottom:20,textAlign:"center",showBorder:!1}},{id:"header-bold",name:"Bold Header",preview:"ðŸ‘¤ Bold",config:{backgroundColor:"#1e293b",textColor:"#FFFFFF",fontFamily:"Montserrat",fontSize:16,padding:40,marginBottom:25,textAlign:"center",showBorder:!1}},{id:"header-gradient",name:"Gradient Header",preview:"ðŸ‘¤ Gradient",config:{backgroundColor:"#3b82f6",backgroundGradient:"linear-gradient(135deg, #3b82f6, #8b5cf6)",textColor:"#FFFFFF",fontFamily:"Poppins",fontSize:15,padding:35,marginBottom:20,textAlign:"left",showBorder:!1,boxShadow:"0 4px 6px rgba(0,0,0,0.1)"}},{id:"header-bordered",name:"Bordered Header",preview:"ðŸ‘¤ Bordered",config:{backgroundColor:"#f8fafc",textColor:"#1e293b",fontFamily:"Georgia",fontSize:14,padding:25,marginBottom:20,textAlign:"center",showBorder:!0,borderColor:"#3b82f6",borderWidth:2,borderStyle:"solid",borderRadius:8}}],sections:[{id:"section-clean",name:"Clean Section",preview:"ðŸ“ Clean",config:{backgroundColor:"#FFFFFF",textColor:"#334155",fontFamily:"Inter",fontSize:10,padding:20,marginBottom:15,showBorder:!1}},{id:"section-card",name:"Card Style",preview:"ðŸ“ Card",config:{backgroundColor:"#f8fafc",textColor:"#1e293b",fontFamily:"Inter",fontSize:10,padding:20,marginBottom:15,showBorder:!0,borderColor:"#e2e8f0",borderWidth:1,borderStyle:"solid",borderRadius:8,boxShadow:"0 1px 3px rgba(0,0,0,0.1)"}},{id:"section-highlighted",name:"Highlighted",preview:"ðŸ“ Highlight",config:{backgroundColor:"#eff6ff",textColor:"#1e40af",fontFamily:"Inter",fontSize:10,padding:20,marginBottom:15,showBorder:!0,borderColor:"#3b82f6",borderWidth:1,borderStyle:"solid",borderRadius:0}},{id:"section-elevated",name:"Elevated",preview:"ðŸ“ Elevated",config:{backgroundColor:"#FFFFFF",textColor:"#1e293b",fontFamily:"Inter",fontSize:10,padding:25,marginBottom:20,showBorder:!1,boxShadow:"0 4px 6px rgba(0,0,0,0.1), 0 2px 4px rgba(0,0,0,0.06)"}}],colorSchemes:[{id:"scheme-professional",name:"Professional Blue",colors:{primary:"#3b82f6",secondary:"#1e293b",text:"#334155",background:"#FFFFFF"}},{id:"scheme-corporate",name:"Corporate Gray",colors:{primary:"#475569",secondary:"#1e293b",text:"#334155",background:"#f8fafc"}},{id:"scheme-creative",name:"Creative Purple",colors:{primary:"#8b5cf6",secondary:"#6366f1",text:"#1e293b",background:"#FFFFFF"}},{id:"scheme-modern",name:"Modern Teal",colors:{primary:"#14b8a6",secondary:"#0891b2",text:"#0f172a",background:"#FFFFFF"}},{id:"scheme-elegant",name:"Elegant Black",colors:{primary:"#1e293b",secondary:"#334155",text:"#475569",background:"#FFFFFF"}}]};function He({onApplyBlock:r,onApplyColorScheme:j}){const[g,d]=p.useState("headers"),w=()=>{const t=We[g];return e.jsx("div",{className:"space-y-2",children:t.map(l=>e.jsx("button",{onClick:()=>{g==="colorSchemes"?j(l.colors):r(l.config,g==="headers"?"header":"section")},className:"w-full p-3 text-left border-2 border-gray-200 rounded-lg hover:border-blue-400 hover:bg-blue-50 transition-all group",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:l.preview||l.name}),e.jsx("div",{className:"text-xs text-gray-500",children:l.name})]}),g==="colorSchemes"?e.jsx("div",{className:"flex gap-1",children:Object.values(l.colors).map((y,x)=>e.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:y}},x))}):e.jsx("div",{className:"w-12 h-12 rounded border border-gray-300 shadow-sm",style:{background:l.config.backgroundGradient||l.config.backgroundColor,borderColor:l.config.showBorder?l.config.borderColor:"transparent",borderWidth:l.config.showBorder?`${l.config.borderWidth}px`:"0",boxShadow:l.config.boxShadow||"none"}})]})},l.id))})};return e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-base font-semibold",children:"Design Blocks"}),e.jsxs("div",{className:"flex gap-1 p-1 bg-gray-100 rounded-lg",children:[e.jsx("button",{onClick:()=>d("headers"),className:`flex-1 px-3 py-2 text-xs font-medium rounded-lg transition-colors ${g==="headers"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Headers"}),e.jsx("button",{onClick:()=>d("sections"),className:`flex-1 px-3 py-2 text-xs font-medium rounded-lg transition-colors ${g==="sections"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Sections"}),e.jsx("button",{onClick:()=>d("colorSchemes"),className:`flex-1 px-3 py-2 text-xs font-medium rounded-lg transition-colors ${g==="colorSchemes"?"bg-white text-blue-600 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Colors"})]}),e.jsx("div",{children:w()}),e.jsx("div",{className:"p-2.5 bg-purple-50 border border-purple-200 rounded-lg text-xs text-purple-800",children:"âœ¨ Select section, then click to apply"})]})}function $e({showRulers:r=!0,showGrid:j=!1,zoom:g=100,alignmentGuides:d=[],containerWidth:w,containerHeight:t}){const x=()=>{const C=[],D=w||800,T=50;for(let c=0;c<=D;c+=T){const f=c%100===0;C.push(e.jsx("div",{className:"absolute",style:{left:`${c}px`,top:0,height:f?"12px":"6px",width:"1px",backgroundColor:"#94a3b8"},children:f&&e.jsx("span",{className:"absolute top-0 left-1 text-xs text-gray-500",style:{fontSize:"9px"},children:c})},`h-${c}`))}return C},n=()=>{const C=[],D=t||1e3,T=50;for(let c=0;c<=D;c+=T){const f=c%100===0;C.push(e.jsx("div",{className:"absolute",style:{top:`${c}px`,left:0,width:f?"12px":"6px",height:"1px",backgroundColor:"#94a3b8"},children:f&&e.jsx("span",{className:"absolute left-0 text-xs text-gray-500",style:{fontSize:"9px",transform:"rotate(-90deg)",transformOrigin:"left top",whiteSpace:"nowrap",top:"12px"},children:c})},`v-${c}`))}return C},b=()=>j?e.jsx("div",{className:"absolute inset-0 pointer-events-none",style:{backgroundImage:`
                        linear-gradient(to right, #e2e8f0 1px, transparent 1px),
                        linear-gradient(to bottom, #e2e8f0 1px, transparent 1px)
                    `,backgroundSize:"20px 20px",opacity:.5}}):null,z=()=>d.map((C,D)=>e.jsx("div",{className:"absolute pointer-events-none z-50",style:{...C.type==="vertical"?{left:`${C.position}px`,top:0,bottom:0,width:"1px"}:{top:`${C.position}px`,left:0,right:0,height:"1px"},backgroundColor:"#3b82f6",boxShadow:"0 0 4px rgba(59, 130, 246, 0.5)"}},`guide-${D}`));return e.jsxs(e.Fragment,{children:[b(),r&&e.jsx("div",{className:"absolute top-0 left-0 right-0 bg-gray-100 border-b border-gray-300",style:{height:"20px",zIndex:100},children:x()}),r&&e.jsx("div",{className:"absolute top-0 left-0 bottom-0 bg-gray-100 border-r border-gray-300",style:{width:"20px",zIndex:100},children:n()}),r&&e.jsx("div",{className:"absolute top-0 left-0 bg-gray-200 border-r border-b border-gray-300 flex items-center justify-center",style:{width:"20px",height:"20px",zIndex:101},children:e.jsx("svg",{className:"w-3 h-3 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})}),z()]})}const Ee={classic:{mode:"single",sections:[{type:"header",label:"Header"},{type:"summary",label:"Summary"},{type:"experience",label:"Work Experience"},{type:"education",label:"Education"},{type:"skills",label:"Skills"}]},modern:{mode:"two-column",sections:[{type:"header",label:"Header",column:"right"},{type:"skills",label:"Skills",column:"left"},{type:"languages",label:"Languages",column:"left"},{type:"summary",label:"Summary",column:"right"},{type:"experience",label:"Work Experience",column:"right"},{type:"education",label:"Education",column:"right"}]},creative:{mode:"two-column",sections:[{type:"header",label:"Header",column:"left"},{type:"summary",label:"Summary",column:"left"},{type:"skills",label:"Skills",column:"left"},{type:"experience",label:"Work Experience",column:"right"},{type:"education",label:"Education",column:"right"},{type:"projects",label:"Projects",column:"right"}]}};function Ve({auth:r,templateId:j=null}){const[g,d]=p.useState("My Custom Template"),[w,t]=p.useState(""),[l,y]=p.useState([]),[x,n]=p.useState(null),[b,z]=p.useState("single"),[C,D]=p.useState({primary:"#3B82F6",secondary:"#64748B",accent:"#10B981"}),[T,c]=p.useState(!1),[f,i]=p.useState(!1),[k,S]=p.useState(!1),[E,G]=p.useState("interactive"),[A,Q]=p.useState([]),[L,Y]=p.useState(-1),[$,J]=p.useState(!0),[R,K]=p.useState(!1),[W,U]=p.useState("components"),[ee,a]=p.useState(!1),[h,v]=p.useState(!1),[u,P]=p.useState(""),[te,I]=p.useState(null);p.useEffect(()=>{if(j)de(j);else{const o="templateBuilder_draft",s=localStorage.getItem(o);if(s)try{const m=JSON.parse(s),N=new Date(m.timestamp),F=Math.floor((Date.now()-N)/6e4);confirm(`Found unsaved work from ${F} minutes ago. Would you like to restore it?`)?(y(m.sections||[]),d(m.name||"My Custom Template"),t(m.description||""),z(m.layoutMode||"single"),I(N)):localStorage.removeItem(o)}catch(m){console.error("Error restoring draft:",m),localStorage.removeItem(o)}}},[j]),p.useEffect(()=>{if(l.length===0&&!g)return;const o="templateBuilder_draft",s=setInterval(()=>{P("saving");const m={sections:l,name:g,description:w,layoutMode:b,timestamp:new Date().toISOString()};try{localStorage.setItem(o,JSON.stringify(m)),I(new Date),P("saved"),setTimeout(()=>P(""),2e3)}catch(N){console.error("Auto-save failed:",N),P("")}},3e4);return()=>clearInterval(s)},[l,g,w,b]),p.useEffect(()=>{if(l.length>0||L===-1){const o=A.slice(0,L+1);o.push(JSON.parse(JSON.stringify(l))),Q(o),Y(o.length-1)}},[l]),p.useEffect(()=>{const o=s=>{s.ctrlKey&&s.key==="z"&&!s.shiftKey&&(s.preventDefault(),O()),(s.ctrlKey&&s.shiftKey&&s.key==="z"||s.ctrlKey&&s.key==="y")&&(s.preventDefault(),q()),(s.key==="Delete"||s.key==="Backspace")&&x&&!s.target.matches("input, textarea")&&(s.preventDefault(),xe(x.id)),s.ctrlKey&&s.key==="d"&&x&&(s.preventDefault(),re()),s.ctrlKey&&s.key==="r"&&(s.preventDefault(),J(!$)),s.ctrlKey&&s.key==="g"&&(s.preventDefault(),K(!R))};return window.addEventListener("keydown",o),()=>window.removeEventListener("keydown",o)},[x,$,R,L,A]);const O=()=>{L>0&&(Y(L-1),y(JSON.parse(JSON.stringify(A[L-1]))))},q=()=>{L<A.length-1&&(Y(L+1),y(JSON.parse(JSON.stringify(A[L+1]))))},re=(o=x)=>{if(!o)return;const s={...o,id:`${o.type}-${Date.now()}`,order:l.length+1,config:{...o.config}},m=l.findIndex(H=>H.id===o.id),N=[...l];N.splice(m+1,0,s);const F=N.map((H,Z)=>({...H,order:Z+1}));y(F),n(s)},B=o=>{const s=l.map(m=>m.id===o.id?{...m,hidden:!m.hidden}:m);y(s)},X=o=>{const s=l.map(m=>m.id===o.id?{...m,locked:!m.locked}:m);y(s)},se=(o,s)=>{const m=l.map(N=>N.id===o.id?{...N,config:{...N.config,customTitle:s}}:N);y(m)},le=(o,s)=>{x&&ne({...x,config:{...x.config,...o}})},ie=o=>{const s=l.map(m=>({...m,config:{...m.config,textColor:o.text,backgroundColor:o.background}}));y(s)},de=async o=>{try{const s=await oe.getStructure(o),{template:m,layout_structure:N,component_config:F}=s.data.data;d(m.name),t(m.description||""),D(m.colors||C),c(m.is_public||!1);const H=N.map((M,he)=>({id:`${M.type}-${Date.now()}-${he}`,type:M.type,label:M.type.charAt(0).toUpperCase()+M.type.slice(1),order:M.order,column:M.column||"main",config:F[M.type]||{}}));y(H);const Z=H.some(M=>M.column&&M.column!=="main");z(Z?"two-column":"single")}catch(s){console.error("Error loading template:",s)}},ge=o=>{const s=Ee[o];if(!s)return;z(s.mode);const m=s.sections.map((N,F)=>({id:`${N.type}-${Date.now()}-${F}`,type:N.type,label:N.label,order:F+1,column:s.mode==="two-column"?N.column||"right":"main",config:{backgroundColor:"#FFFFFF",textColor:"#000000",fontFamily:"DejaVu Sans",fontSize:10,lineHeight:1.5,padding:20,marginBottom:20,showBorder:!1,borderColor:"#CCCCCC",textAlign:"left"}}));y(m),n(null)},pe=(o,s)=>{o.dataTransfer.setData("sectionType",s.type),o.dataTransfer.setData("sectionLabel",s.label)},be=(o,s=null)=>{o.preventDefault();const m=o.dataTransfer.getData("sectionType"),N=o.dataTransfer.getData("sectionLabel");if(m){const F=b==="two-column"?s||"right":"main",H={id:`${m}-${Date.now()}`,type:m,label:N,order:l.length+1,column:F,config:{backgroundColor:"#FFFFFF",textColor:"#000000",fontFamily:"DejaVu Sans",fontSize:10,lineHeight:1.5,padding:20,marginBottom:20,showBorder:!1,borderColor:"#CCCCCC",borderStyle:"solid",borderWidth:1,borderRadius:0,textAlign:"left"}};y([...l,H])}},Ne=o=>{o.preventDefault()},ce=o=>{n(o)},ne=o=>{y(l.map(s=>s.id===o.id?o:s)),n(o)},xe=o=>{y(l.filter(s=>s.id!==o)),x?.id===o&&n(null)},me=(o,s,m,N)=>{const F=[...l];if(m&&N&&m!==N){const M=F[o];M.column=N}const[H]=F.splice(o,1);F.splice(s,0,H);const Z=F.map((M,he)=>({...M,order:he+1}));y(Z)},[fe,V]=p.useState(""),we=()=>g.trim()?g.trim().length<3?"Template name must be at least 3 characters long":l.length===0?"Please add at least one section to your template":l.some(s=>s.type==="header")?null:"Your template should have at least one header section":"Please enter a template name",ke=async()=>{const o=we();if(o){V(o);return}V("");try{i(!0);const s=l.map(F=>({type:F.type,order:F.order,column:F.column})),m={};l.forEach(F=>{m[F.type]=F.config});const N={name:g,description:w,layout_structure:s,component_config:m,colors:C,is_public:T,layout_mode:b};j?await oe.update(j,N):await oe.create(N),localStorage.removeItem("templateBuilder_draft"),S(!1),ue.visit("/resumes")}catch(s){console.error("Error saving template:",s),s.response?.status===422?V("Validation failed. Please check all required fields."):s.response?.status===401?V("You are not authorized. Please log in again."):s.response?.status===500?V("Server error. Please try again later."):navigator.onLine?V(s.response?.data?.message||"Failed to save template. Please try again."):V("No internet connection. Please check your network.")}finally{i(!1)}},Se=async()=>{if(j)try{const s=(await oe.duplicate(j)).data.data.id;ue.visit(`/templates/builder/${s}`)}catch(o){console.error("Error duplicating template:",o),alert("Failed to duplicate template. Please try again.")}};return e.jsxs(Fe,{user:r.user,children:[e.jsx(Ce,{title:"Template Builder"}),e.jsx("div",{className:"py-3",children:e.jsxs("div",{className:"max-w-screen-2xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"mb-2 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Template Builder"}),e.jsxs("span",{className:"text-xs text-gray-500",children:[b==="single"?"Single":"Two"," Column"]}),u&&e.jsx("div",{className:"flex items-center gap-1.5 text-xs",children:u==="saving"?e.jsxs(e.Fragment,{children:[e.jsxs("svg",{className:"w-3 h-3 animate-spin text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e.jsx("span",{className:"text-gray-500",children:"Saving..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("svg",{className:"w-3 h-3 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),e.jsx("span",{className:"text-green-600",children:"Saved"})]})})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>z(b==="single"?"two-column":"single"),className:"px-3 py-1.5 text-xs border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:b==="single"?"2 Col":"1 Col"}),j&&e.jsx("button",{onClick:Se,className:"px-3 py-1.5 text-xs border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Duplicate"}),e.jsx("button",{onClick:()=>ue.visit("/resumes"),className:"px-3 py-1.5 text-xs border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>S(!0),disabled:f,className:"px-4 py-1.5 text-xs bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:f?"Saving...":j?"Update":"Save"})]})]}),e.jsxs("div",{className:"mb-2 flex items-center justify-between p-2 bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>a(!ee),className:"p-2 rounded hover:bg-gray-100 transition-colors",title:"Toggle Left Sidebar",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),e.jsx("button",{onClick:()=>v(!h),className:"p-2 rounded hover:bg-gray-100 transition-colors",title:"Toggle Properties Sidebar",children:e.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-2"}),e.jsx("button",{onClick:O,disabled:L<=0,className:"p-2 rounded hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Undo (Ctrl+Z)",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})}),e.jsx("button",{onClick:q,disabled:L>=A.length-1,className:"p-2 rounded hover:bg-gray-100 disabled:opacity-30 disabled:cursor-not-allowed transition-colors",title:"Redo (Ctrl+Y)",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 10h-10a8 8 0 00-8 8v2m18-10l-6 6m6-6l-6-6"})})}),e.jsx("div",{className:"w-px h-6 bg-gray-300 mx-2"}),e.jsx("button",{onClick:()=>J(!$),className:`p-2 rounded transition-colors ${$?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,title:"Toggle Rulers (Ctrl+R)",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})}),e.jsx("button",{onClick:()=>K(!R),className:`p-2 rounded transition-colors ${R?"bg-blue-100 text-blue-600":"hover:bg-gray-100"}`,title:"Toggle Grid (Ctrl+G)",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-3zM14 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1h-4a1 1 0 01-1-1v-3z"})})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:[l.length," sections"]}),e.jsx("button",{onClick:()=>G(E==="interactive"?"canvas":"interactive"),className:"text-xs text-blue-600 hover:text-blue-700 font-medium",children:E==="interactive"?"ðŸ“‹ List View":"âœ¨ Interactive"})]})]}),E==="canvas"?e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsx("div",{className:"col-span-3",children:e.jsx(ye,{onDragStart:pe,onLayoutPresetSelect:ge})}),e.jsx("div",{className:"col-span-5",children:e.jsx(Be,{sections:l,onDrop:be,onDragOver:Ne,onSectionClick:ce,selectedSection:x,onRemoveSection:xe,onReorder:me,layoutMode:b})}),e.jsxs("div",{className:"col-span-4 space-y-6",children:[e.jsx(je,{section:x,onUpdate:ne,layoutMode:b}),e.jsx(Me,{sections:l,templateName:g,colors:C,layoutMode:b})]})]}):e.jsxs("div",{className:"flex gap-4",children:[!ee&&e.jsx("div",{className:"w-72 flex-shrink-0",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden h-[calc(100vh-180px)]",children:[e.jsxs("div",{className:"flex border-b border-gray-200 bg-gray-50",children:[e.jsx("button",{onClick:()=>U("components"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${W==="components"?"bg-white text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Components"}),e.jsx("button",{onClick:()=>U("blocks"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${W==="blocks"?"bg-white text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Blocks"}),e.jsx("button",{onClick:()=>U("layers"),className:`flex-1 px-4 py-3 text-sm font-medium transition-colors ${W==="layers"?"bg-white text-blue-600 border-b-2 border-blue-600":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"}`,children:"Layers"})]}),e.jsxs("div",{className:"overflow-y-auto h-[calc(100%-49px)]",children:[W==="components"&&e.jsx("div",{className:"p-4",children:e.jsx(ye,{onDragStart:pe,onLayoutPresetSelect:ge})}),W==="blocks"&&e.jsx("div",{className:"p-4",children:e.jsx(He,{onApplyBlock:le,onApplyColorScheme:ie})}),W==="layers"&&e.jsx("div",{className:"p-4",children:e.jsx(Pe,{sections:l,selectedSection:x,onSectionClick:ce,onSectionReorder:(o,s)=>me(o,s,null,null),onSectionToggleVisibility:B,onSectionToggleLock:X,onSectionRename:se})})]})]})}),e.jsx("div",{className:"flex-1 min-w-0 relative",children:e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-gray-100 to-gray-200 rounded-lg overflow-hidden",children:[$&&e.jsx("div",{className:"absolute inset-0 pointer-events-none z-10",children:e.jsx($e,{showRulers:$,showGrid:R,containerWidth:800,containerHeight:1100})}),e.jsx(Te,{sections:l.filter(o=>!o.hidden),onSectionClick:ce,onSectionUpdate:ne,onSectionReorder:me,onSectionDrop:be,onRemoveSection:xe,onDuplicateSection:re,selectedSection:x,layoutMode:b})]})}),!h&&e.jsx("div",{className:"w-80 flex-shrink-0",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 h-[calc(100vh-180px)] overflow-y-auto",children:e.jsx(je,{section:x,onUpdate:ne,layoutMode:b})})})]})]})}),k&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md w-full mx-4",children:[e.jsx("h3",{className:"text-xl font-semibold mb-4",children:"Save Template"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Template Name *"}),e.jsx("input",{type:"text",value:g,onChange:o=>d(o.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., Professional Modern"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),e.jsx("textarea",{value:w,onChange:o=>t(o.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Describe your template..."})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:T,onChange:o=>c(o.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Make this template public"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"Public templates can be used by other users"})]}),fe&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-lg flex items-start gap-2",children:[e.jsx("svg",{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e.jsx("p",{className:"text-xs text-red-800 flex-1",children:fe})]}),e.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:e.jsxs("p",{className:"text-xs text-blue-800",children:["Layout: ",b==="single"?"Single Column":"Two Column"," â€¢ ",l.length," sections"]})})]}),e.jsxs("div",{className:"mt-6 flex gap-3 justify-end",children:[e.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),e.jsx("button",{onClick:ke,disabled:f,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:f?"Saving...":"Save"})]})]})})]})}export{Ve as default};
